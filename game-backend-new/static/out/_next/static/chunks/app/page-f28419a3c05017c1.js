(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var t=s(5155),n=s(2115),r=s(2809),i=s(1846),l=s(8136),o=s(6355),c=s(2214),d=s(8964),h=s(902),x=s(737),m=s(9522),y=s(1770);let u={"Willamette Valley":{climate:"cool",soil_types:["volcanic","sedimentary"],grape_varietals:["Pinot Noir","Chardonnay","Pinot Gris"],base_cost:5e4},Jura:{climate:"cool",soil_types:["marl","limestone"],grape_varietals:["Savagnin","Poulsard","Trousseau","Chardonnay","Pinot Noir"],base_cost:4e4},"Northern Rh\xf4ne":{climate:"continental",soil_types:["granite","schist"],grape_varietals:["Syrah","Viognier"],base_cost:6e4}},j={"Stainless Steel Tank":{capacity:5e3,cost:1e4,type:"fermentation/aging"},"Open Top Fermenter":{capacity:1e3,cost:2e3,type:"fermentation"},"Neutral Oak Barrel (225L)":{capacity:225,cost:500,type:"aging"},"Concrete Egg":{capacity:1500,cost:7e3,type:"fermentation/aging"},"Amphora (500L)":{capacity:500,cost:3e3,type:"fermentation/aging"}},g={"Pinot Noir":{color:"red",ripening_month:9,base_quality:70},Chardonnay:{color:"white",ripening_month:9,base_quality:65},"Pinot Gris":{color:"white",ripening_month:9,base_quality:60},Savagnin:{color:"white",ripening_month:10,base_quality:75},Poulsard:{color:"red",ripening_month:9,base_quality:68},Trousseau:{color:"red",ripening_month:9,base_quality:68},Syrah:{color:"red",ripening_month:9,base_quality:72},Viognier:{color:"white",ripening_month:9,base_quality:70}};function A(){var e,a,s,A,p,v,w,b,N,T,_;let[f,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(!0),[B,P]=(0,n.useState)(null),[L,E]=(0,n.useState)(""),[O,H]=(0,n.useState)(""),[V,q]=(0,n.useState)(null),[G,F]=(0,n.useState)(null),[I,W]=(0,n.useState)(!1),[z,D]=(0,n.useState)(null),[M,J]=(0,n.useState)(""),[Y,Q]=(0,n.useState)(null),[R,U]=(0,n.useState)(!1),[$,K]=(0,n.useState)(null),[X,Z]=(0,n.useState)(null),[ee,ea]=(0,n.useState)(!1),[es,et]=(0,n.useState)(null),[en,er]=(0,n.useState)(null),[ei,el]=(0,n.useState)("no"),[eo,ec]=(0,n.useState)("Destemmed/Crushed"),[ed,eh]=(0,n.useState)(!1),[ex,em]=(0,n.useState)(null),[ey,eu]=(0,n.useState)(null),[ej,eg]=(0,n.useState)(null),[eA,ep]=(0,n.useState)(!1),[ev,ew]=(0,n.useState)(null),[eb,eN]=(0,n.useState)(""),[eT,e_]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=localStorage.getItem("accessToken");e?(q(e),ef(e)):C(!1)},[]);let ef=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;C(!0),P(null);try{let a={};e&&(a.Authorization="Bearer ".concat(e));let s=await fetch("".concat("","/api"),{headers:a});if(!s.ok)throw 401===s.status&&(F("Unauthorized. Please log in."),q(null),localStorage.removeItem("accessToken")),Error("HTTP error! status: ".concat(s.status));let t=await s.json();k(t)}catch(e){P(e.message)}finally{C(!1)}},ek=async()=>{C(!0);try{let e=await fetch("".concat("","/api/advance_month"),{method:"POST",headers:{Authorization:"Bearer ".concat(V)}});if(!e.ok)throw 401===e.status&&(F("Unauthorized. Please log in."),q(null),localStorage.removeItem("accessToken")),Error("HTTP error! status: ".concat(e.status));let a=await e.json();k(a)}catch(e){P(e.message)}finally{C(!1)}},eS=async e=>{e.preventDefault(),C(!0),F(null);try{let e=new URLSearchParams;e.append("username",L),e.append("password",O);let a=await fetch("".concat("","/api/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()});if(!a.ok){let e=await a.json();throw Error(e.detail||"HTTP error! status: ".concat(a.status))}let s=await a.json();localStorage.setItem("accessToken",s.access_token),q(s.access_token),await ef(s.access_token)}catch(e){F(e.message)}finally{C(!1)}},eC=async()=>{if(z&&M){Q(null),C(!0);try{let e=await fetch("".concat("","/api/buy_vineyard"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({vineyard_data:z,vineyard_name:M})});if(!e.ok){let a=await e.json();throw Error(a.detail||"HTTP error! status: ".concat(e.status))}await ef(),W(!1),J(""),D(null)}catch(e){Q(e.message)}finally{C(!1)}}},eB=async e=>{C(!0);try{let a=await fetch("".concat("","/api/tend_vineyard"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({vineyard_name:e})});if(!a.ok){let e=await a.json();throw Error(e.detail||"HTTP error! status: ".concat(a.status))}await ef()}catch(e){P(e.message)}finally{C(!1)}},eP=async e=>{C(!0);try{let a=await fetch("".concat("","/api/harvest_grapes"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({vineyard_name:e})});if(!a.ok){let e=await a.json();throw Error(e.detail||"HTTP error! status: ".concat(a.status))}await ef()}catch(e){P(e.message)}finally{C(!1)}},eL=async()=>{if($){Z(null),C(!0);try{let e=await fetch("".concat("","/api/buy_vessel"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({vessel_type_name:$.name})});if(!e.ok){let a=await e.json();throw Error(a.detail||"HTTP error! status: ".concat(e.status))}await ef(),U(!1),K(null)}catch(e){Z(e.message)}finally{C(!1)}}},eE=async()=>{if(es){er(null),C(!0);try{var e;let a=null!=(e=null==f?void 0:f.player.grapes_inventory.findIndex(e=>e.id===es.id))?e:-1;if(-1===a)throw Error("Selected grape not found in inventory.");let s=await fetch("".concat("","/api/process_grapes"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({grape_index:a,sort_choice:ei,destem_crush_method:eo})});if(!s.ok){let e=await s.json();throw Error(e.detail||"HTTP error! status: ".concat(s.status))}await ef(),ea(!1)}catch(e){er(e.message)}finally{C(!1)}}},eO=async()=>{if(null!==ex&&null!==ey){eg(null),C(!0);try{var e;let a=null!=(e=null==f?void 0:f.player.winery.must_in_production.findIndex(e=>e.id===ex.id))?e:-1;if(-1===a)throw Error("Selected must not found in inventory.");let s=await fetch("".concat("","/api/start_fermentation"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({must_index:a,vessel_index:ey})});if(!s.ok){let e=await s.json();throw Error(e.detail||"HTTP error! status: ".concat(s.status))}await ef(),eh(!1)}catch(e){eg(e.message)}finally{C(!1)}}},eH=async e=>{C(!0);try{let a=await fetch("".concat("","/api/perform_maceration_action"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({wine_prod_index:e,action_type:"Punch Down"})});if(!a.ok){let e=await a.json();throw Error(e.detail||"HTTP error! status: ".concat(a.status))}await ef()}catch(e){P(e.message)}finally{C(!1)}},eV=async()=>{if(ev&&eb){e_(null),C(!0);try{var e;let a=null!=(e=null==f?void 0:f.player.winery.wines_aging.findIndex(e=>e.id===ev.id))?e:-1;if(-1===a)throw Error("Selected wine not found in aging inventory.");let s=await fetch("".concat("","/api/bottle_wine"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)},body:JSON.stringify({wine_prod_index:a,wine_name:eb})});if(!s.ok){let e=await s.json();throw Error(e.detail||"HTTP error! status: ".concat(s.status))}await ef(),ep(!1),eN("")}catch(e){e_(e.message)}finally{C(!1)}}};if(S&&!f)return(0,t.jsx)("p",{children:"Loading game..."});if(B)return(0,t.jsxs)("p",{children:["Error: ",B]});if(!V||!f)return(0,t.jsxs)(r.A,{className:"mt-5",children:[(0,t.jsx)("h1",{className:"text-center mb-4",children:"Terroir & Time: A Natural Winemaking Saga"}),(0,t.jsx)(i.A,{className:"justify-content-md-center",children:(0,t.jsx)(l.A,{md:6,children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary text-center",children:"Login"}),G&&(0,t.jsx)(c.A,{variant:"danger",children:G}),(0,t.jsxs)(d.A,{onSubmit:eS,children:[(0,t.jsxs)(d.A.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,t.jsx)(d.A.Label,{children:"Username"}),(0,t.jsx)(d.A.Control,{type:"text",placeholder:"Enter username",value:L,onChange:e=>E(e.target.value),required:!0,className:"bg-secondary text-white border-secondary"})]}),(0,t.jsxs)(d.A.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,t.jsx)(d.A.Label,{children:"Password"}),(0,t.jsx)(d.A.Control,{type:"password",placeholder:"Password",value:O,onChange:e=>H(e.target.value),required:!0,className:"bg-secondary text-white border-secondary"})]}),(0,t.jsx)(h.A,{variant:"primary",type:"submit",disabled:S,className:"w-100",children:S?"Logging in...":"Login"})]})]})})})})]});let{player:eq,current_year:eG,current_month_index:eF,months:eI}=f;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{bg:"dark",variant:"dark",expand:"lg",className:"mb-4",children:(0,t.jsxs)(r.A,{children:[(0,t.jsx)(x.A.Brand,{href:"#home",children:"Terroir & Time"}),(0,t.jsx)(x.A.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,t.jsxs)(x.A.Collapse,{id:"basic-navbar-nav",children:[(0,t.jsxs)(m.A,{className:"me-auto",children:[(0,t.jsx)(m.A.Link,{href:"#game",children:"Game Status"}),(0,t.jsx)(m.A.Link,{href:"#vineyards",children:"Vineyards"}),(0,t.jsx)(m.A.Link,{href:"#winery",children:"Winery"}),(0,t.jsx)(m.A.Link,{href:"#inventory",children:"Inventory"})]}),(0,t.jsx)(m.A,{children:(0,t.jsx)(h.A,{variant:"outline-light",onClick:()=>{q(null),localStorage.removeItem("accessToken"),k(null),F(null),E(""),H(""),C(!1)},children:"Logout"})})]})]})}),(0,t.jsxs)(r.A,{className:"mt-5 text-white",children:[(0,t.jsx)("h1",{className:"text-center mb-4 text-primary",children:"Terroir & Time: A Natural Winemaking Saga"}),(0,t.jsx)(i.A,{id:"game",className:"mb-4",children:(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary",children:"Game Status"}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Date:"})," ",eI[eF],", ",eG]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Money:"})," $",eq.money.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Reputation:"})," ",eq.reputation,"/100"]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Grapes:"})," ",(eq.grapes_inventory||[]).reduce((e,a)=>e+a.quantity_kg,0)," kg"]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Bottled Wine:"})," ",(eq.bottled_wines||[]).reduce((e,a)=>e+a.bottles,0)," bottles"]}),(0,t.jsx)(h.A,{variant:"success",onClick:ek,disabled:S,children:S?"Advancing...":"Advance Month"})]})})})}),(0,t.jsx)(i.A,{className:"mb-4",children:(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary",children:"Player Info"}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Name:"})," ",eq.name]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Vineyards Owned:"})," ",eq.vineyards.length]}),(0,t.jsxs)(o.A.Text,{children:[(0,t.jsx)("strong",{children:"Winery Vessels:"})," ",(null==(e=eq.winery)?void 0:e.vessels.length)||0]})]})})})}),(0,t.jsx)(i.A,{id:"vineyards",className:"mb-4",children:(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary",children:"Your Vineyards"}),0===eq.vineyards.length?(0,t.jsx)(o.A.Text,{children:"You don't own any vineyards yet. Time to buy one!"}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:eq.vineyards.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.name," (",e.varietal,")"]}),(0,t.jsxs)(o.A.Text,{children:["Region: ",e.region]}),(0,t.jsxs)(o.A.Text,{children:["Size: ",e.size_acres," acres"]}),(0,t.jsxs)(o.A.Text,{children:["Health: ",e.health,"%"]}),(0,t.jsxs)(o.A.Text,{children:["Grapes Ready: ",e.grapes_ready?"Yes":"No"]}),(0,t.jsxs)(o.A.Text,{children:["Harvested This Year: ",e.harvested_this_year?"Yes":"No"]}),(0,t.jsx)(h.A,{variant:"info",className:"me-2",onClick:()=>eB(e.name),disabled:S,children:"Tend"}),(0,t.jsx)(h.A,{variant:"warning",onClick:()=>eP(e.name),disabled:S||!e.grapes_ready||e.harvested_this_year,children:"Harvest"})]})})},a))}),(0,t.jsx)(h.A,{variant:"primary",className:"mt-3",onClick:()=>W(!0),children:"Buy New Vineyard"})]})})})}),(0,t.jsx)(i.A,{id:"winery",className:"mb-4",children:(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary",children:"Your Winery"}),(0,t.jsxs)(o.A.Text,{children:["Winery Name: ",(null==(a=eq.winery)?void 0:a.name)||"N/A"]}),(0,t.jsx)("h5",{children:"Vessels:"}),(null==(s=eq.winery)?void 0:s.vessels.length)===0?(0,t.jsx)(o.A.Text,{children:"No vessels in your winery yet."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:null==(A=eq.winery)?void 0:A.vessels.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{children:e.type}),(0,t.jsxs)(o.A.Text,{children:["Capacity: ",e.capacity,"L"]}),(0,t.jsxs)(o.A.Text,{children:["In Use: ",e.in_use?"Yes":"No"]})]})})},a))}),(0,t.jsx)(h.A,{variant:"primary",className:"mt-3",onClick:()=>U(!0),children:"Buy New Vessel"})]})})})}),(0,t.jsx)(i.A,{id:"inventory",className:"mb-4",children:(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"shadow-sm bg-dark text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsx)(o.A.Title,{className:"text-primary",children:"Inventory"}),(0,t.jsx)("h5",{children:"Grapes:"}),0===eq.grapes_inventory.length?(0,t.jsx)(o.A.Text,{children:"No grapes in inventory."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:eq.grapes_inventory.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.varietal," (",e.vintage,")"]}),(0,t.jsxs)(o.A.Text,{children:["Quantity: ",e.quantity_kg," kg"]}),(0,t.jsxs)(o.A.Text,{children:["Quality: ",e.quality]}),(0,t.jsx)(h.A,{variant:"primary",onClick:()=>{et(e),ea(!0)},children:"Process"})]})})},a))}),(0,t.jsx)("h5",{className:"mt-4",children:"Must:"}),(null==(p=eq.winery)?void 0:p.must_in_production.length)===0?(0,t.jsx)(o.A.Text,{children:"No must in production."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:null==(v=eq.winery)?void 0:v.must_in_production.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.varietal," (",e.vintage,")"]}),(0,t.jsxs)(o.A.Text,{children:["Quantity: ",e.quantity_kg," kg"]}),(0,t.jsxs)(o.A.Text,{children:["Quality: ",e.quality]}),(0,t.jsx)(h.A,{variant:"success",onClick:()=>{em(e),eh(!0)},children:"Start Fermentation"})]})})},a))}),(0,t.jsx)("h5",{className:"mt-4",children:"Wines Fermenting:"}),(null==(w=eq.winery)?void 0:w.wines_fermenting.length)===0?(0,t.jsx)(o.A.Text,{children:"No wines fermenting."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:null==(b=eq.winery)?void 0:b.wines_fermenting.map((e,a)=>{var s;return(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.varietal," (",e.vintage,")"]}),(0,t.jsxs)(o.A.Text,{children:["Vessel: ",e.vessel_type]}),(0,t.jsxs)(o.A.Text,{children:["Fermentation Progress: ",e.fermentation_progress,"%"]}),(0,t.jsxs)(o.A.Text,{children:["Maceration Actions: ",e.maceration_actions_taken]}),(null==(s=g[e.varietal])?void 0:s.color)==="red"&&(0,t.jsx)(h.A,{variant:"info",onClick:()=>eH(eq.winery.wines_fermenting.findIndex(a=>a.id===e.id)),disabled:S,children:"Perform Maceration"})]})})},a)})}),(0,t.jsx)("h5",{className:"mt-4",children:"Wines Aging:"}),(null==(N=eq.winery)?void 0:N.wines_aging.length)===0?(0,t.jsx)(o.A.Text,{children:"No wines aging."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:null==(T=eq.winery)?void 0:T.wines_aging.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.varietal," (",e.vintage,")"]}),(0,t.jsxs)(o.A.Text,{children:["Vessel: ",e.vessel_type]}),(0,t.jsxs)(o.A.Text,{children:["Aging Progress: ",e.aging_progress,"/",e.aging_duration," months"]}),e.aging_progress>=e.aging_duration&&(0,t.jsx)(h.A,{variant:"primary",onClick:()=>{ew(e),ep(!0)},disabled:S,children:"Bottle"})]})})},a))}),(0,t.jsx)("h5",{className:"mt-4",children:"Bottled Wines:"}),0===eq.bottled_wines.length?(0,t.jsx)(o.A.Text,{children:"No bottled wines yet."}):(0,t.jsx)(i.A,{xs:1,md:2,lg:3,className:"g-4",children:eq.bottled_wines.map((e,a)=>(0,t.jsx)(l.A,{children:(0,t.jsx)(o.A,{className:"h-100 bg-secondary text-white",children:(0,t.jsxs)(o.A.Body,{children:[(0,t.jsxs)(o.A.Title,{children:[e.name," (",e.vintage,")"]}),(0,t.jsxs)(o.A.Text,{children:["Varietal: ",e.varietal]}),(0,t.jsxs)(o.A.Text,{children:["Style: ",e.style]}),(0,t.jsxs)(o.A.Text,{children:["Quality: ",e.quality]}),(0,t.jsxs)(o.A.Text,{children:["Bottles: ",e.bottles]})]})})},a))})]})})})})]}),(0,t.jsxs)(y.A,{show:I,onHide:()=>W(!1),centered:!0,dialogClassName:"modal-dark",children:[(0,t.jsx)(y.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,t.jsx)(y.A.Title,{children:"Buy New Vineyard"})}),(0,t.jsxs)(y.A.Body,{className:"bg-dark text-white",children:[Y&&(0,t.jsx)(c.A,{variant:"danger",children:Y}),(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Select Vineyard Type"}),(0,t.jsxs)(d.A.Control,{as:"select",onChange:e=>{let[a,s]=e.target.value.split("|");D({...u[a],varietal:s,region:a,cost:u[a].base_cost+Math.floor(1e4*Math.random())-5e3})},className:"bg-secondary text-white border-secondary",children:[(0,t.jsx)("option",{value:"",children:"-- Select --"}),Object.entries(u).map(e=>{let[a,s]=e;return s.grape_varietals.map(e=>(0,t.jsxs)("option",{value:"".concat(a,"|").concat(e),children:[e," from ",a," (Est. Cost: $",(s.base_cost+Math.floor(1e4*Math.random())-5e3).toLocaleString(),")"]},"".concat(a,"-").concat(e)))})]})]}),z&&(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Vineyard Name"}),(0,t.jsx)(d.A.Control,{type:"text",placeholder:"Enter a name for your new vineyard",value:M,onChange:e=>J(e.target.value),required:!0,className:"bg-secondary text-white border-secondary"}),(0,t.jsxs)(d.A.Text,{className:"text-muted",children:["Cost: $",(null==(_=z.cost)?void 0:_.toLocaleString())||"N/A"]})]})]})]}),(0,t.jsxs)(y.A.Footer,{className:"bg-dark border-top border-secondary",children:[(0,t.jsx)(h.A,{variant:"secondary",onClick:()=>W(!1),children:"Cancel"}),(0,t.jsx)(h.A,{variant:"primary",onClick:eC,disabled:S||!z||!M,children:"Buy Vineyard"})]})]}),(0,t.jsxs)(y.A,{show:R,onHide:()=>U(!1),centered:!0,dialogClassName:"modal-dark",children:[(0,t.jsx)(y.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,t.jsx)(y.A.Title,{children:"Buy New Vessel"})}),(0,t.jsxs)(y.A.Body,{className:"bg-dark text-white",children:[X&&(0,t.jsx)(c.A,{variant:"danger",children:X}),(0,t.jsx)(d.A,{children:(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Select Vessel Type"}),(0,t.jsxs)(d.A.Control,{as:"select",onChange:e=>{K({name:e.target.value,...j[e.target.value]})},className:"bg-secondary text-white border-secondary",children:[(0,t.jsx)("option",{value:"",children:"-- Select --"}),Object.entries(j).map(e=>{let[a,s]=e;return(0,t.jsxs)("option",{value:a,children:[a," (Capacity: ",s.capacity,"L, Cost: $",s.cost.toLocaleString(),")"]},a)})]})]})})]}),(0,t.jsxs)(y.A.Footer,{className:"bg-dark border-top border-secondary",children:[(0,t.jsx)(h.A,{variant:"secondary",onClick:()=>U(!1),children:"Cancel"}),(0,t.jsx)(h.A,{variant:"primary",onClick:eL,disabled:S||!$,children:"Buy Vessel"})]})]}),(0,t.jsxs)(y.A,{show:ee,onHide:()=>ea(!1),centered:!0,dialogClassName:"modal-dark",children:[(0,t.jsx)(y.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,t.jsx)(y.A.Title,{children:"Process Grapes"})}),(0,t.jsxs)(y.A.Body,{className:"bg-dark text-white",children:[en&&(0,t.jsx)(c.A,{variant:"danger",children:en}),(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Sort Grapes?"}),(0,t.jsxs)(d.A.Control,{as:"select",value:ei,onChange:e=>el(e.target.value),className:"bg-secondary text-white border-secondary",children:[(0,t.jsx)("option",{value:"no",children:"No"}),(0,t.jsxs)("option",{value:"yes",children:["Yes (Cost: $",(((null==es?void 0:es.quantity_kg)||0)/100*100).toFixed(2),")"]})]})]}),(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Destem/Crush Method"}),(0,t.jsxs)(d.A.Control,{as:"select",value:eo,onChange:e=>ec(e.target.value),className:"bg-secondary text-white border-secondary",children:[(0,t.jsx)("option",{value:"Destemmed/Crushed",children:"Destemmed/Crushed"}),(0,t.jsx)("option",{value:"Partial Destem",children:"Partial Destem"}),(0,t.jsx)("option",{value:"Whole Cluster",children:"Whole Cluster"})]})]})]})]}),(0,t.jsxs)(y.A.Footer,{className:"bg-dark border-top border-secondary",children:[(0,t.jsx)(h.A,{variant:"secondary",onClick:()=>ea(!1),children:"Cancel"}),(0,t.jsx)(h.A,{variant:"primary",onClick:eE,disabled:S,children:"Process Grapes"})]})]}),(0,t.jsxs)(y.A,{show:ed,onHide:()=>eh(!1),centered:!0,dialogClassName:"modal-dark",children:[(0,t.jsx)(y.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,t.jsx)(y.A.Title,{children:"Start Fermentation"})}),(0,t.jsxs)(y.A.Body,{className:"bg-dark text-white",children:[ej&&(0,t.jsx)(c.A,{variant:"danger",children:ej}),(0,t.jsx)(d.A,{children:(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Select Fermentation Vessel"}),(0,t.jsxs)(d.A.Control,{as:"select",onChange:e=>eu(parseInt(e.target.value)),className:"bg-secondary text-white border-secondary",children:[(0,t.jsx)("option",{value:"",children:"-- Select an available vessel --"}),null==f?void 0:f.player.winery.vessels.map((e,a)=>!e.in_use&&j[e.type].type.includes("fermentation")&&(0,t.jsxs)("option",{value:a,children:[e.type," (Capacity: ",e.capacity,"L)"]},a))]})]})})]}),(0,t.jsxs)(y.A.Footer,{className:"bg-dark border-top border-secondary",children:[(0,t.jsx)(h.A,{variant:"secondary",onClick:()=>eh(!1),children:"Cancel"}),(0,t.jsx)(h.A,{variant:"primary",onClick:eO,disabled:S||null===ey,children:"Start Fermentation"})]})]}),(0,t.jsxs)(y.A,{show:eA,onHide:()=>ep(!1),centered:!0,dialogClassName:"modal-dark",children:[(0,t.jsx)(y.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,t.jsx)(y.A.Title,{children:"Bottle Wine"})}),(0,t.jsxs)(y.A.Body,{className:"bg-dark text-white",children:[eT&&(0,t.jsx)(c.A,{variant:"danger",children:eT}),(0,t.jsx)(d.A,{children:(0,t.jsxs)(d.A.Group,{className:"mb-3",children:[(0,t.jsx)(d.A.Label,{children:"Wine Name"}),(0,t.jsx)(d.A.Control,{type:"text",placeholder:"Enter a name for your wine",value:eb,onChange:e=>eN(e.target.value),required:!0,className:"bg-secondary text-white border-secondary"})]})})]}),(0,t.jsxs)(y.A.Footer,{className:"bg-dark border-top border-secondary",children:[(0,t.jsx)(h.A,{variant:"secondary",onClick:()=>ep(!1),children:"Cancel"}),(0,t.jsx)(h.A,{variant:"primary",onClick:eV,disabled:S||!eb,children:"Bottle Wine"})]})]})]})}},9929:(e,a,s)=>{Promise.resolve().then(s.bind(s,3792))}},e=>{var a=a=>e(e.s=a);e.O(0,[424,441,684,358],()=>a(9929)),_N_E=e.O()}]);